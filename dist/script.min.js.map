{
  "version": 3,
  "sources": ["../src/init.js", "../index.js"],
  "sourcesContent": ["if (!window.FLK) {\r\n  window.FLK = {};\r\n  console.log(\"Loaded FLK\");\r\n} else {\r\n  console.log(\"Reloaded FLK\");\r\n  clearInterval(FLK.animationID);\r\n  let els = document.querySelectorAll(\"[flk-init]\");\r\n  for (let i = 0; i < els.length; i++) {\r\n    /** @type {HTMLElement} */\r\n    const element = els[i];\r\n    element.removeAttribute(\"flk-init\");\r\n  }\r\n}\r\n\r\nwindow.FLK = {};\r\nFLK.lastTime = 0;\r\nFLK.z = 99;\r\nFLK.canvasEditor = null;\r\nFLK.mosaicEditor = null;\r\nFLK.mosaicRoot = document.querySelector(\"#root\");\r\n", "import * as init from \"./src/init\";\r\nimport { teste } from \"./src/utils\";\r\n\r\nfunction elementDrag(e) {\r\n  e = e || window.event;\r\n  // e.preventDefault();\r\n  FLK.x = e.clientX;\r\n  FLK.y = e.clientY;\r\n}\r\n\r\nFLK.mosaicRoot.addEventListener(\"mousemove\", elementDrag);\r\n\r\nFLK.loop = (delta) => {\r\n  FLK.mosaics = document.querySelectorAll(\".mosaic-tile\"); // populate mosaics\r\n  let splits = document.querySelectorAll(\".mosaic-split\");\r\n\r\n  for (let i = 0; i < splits.length; i++) {\r\n    const element = splits[i];\r\n    element.setAttribute(\"style\", \"display:hidden\");\r\n  }\r\n\r\n  if (!FLK.mosaics) return;\r\n  for (let i = 0; i < FLK.mosaics.length; i++) {\r\n    const mosaic = FLK.mosaics[i];\r\n    /** @type {HTMLElement} */\r\n    let editor = mosaic.querySelector(\"canvas\"); // find canvas editor\r\n    if (editor) {\r\n      FLK.canvasEditor = editor;\r\n      FLK.mosaicEditor = mosaic;\r\n      let styl = mosaic.getAttribute(\"style\");\r\n      styl = `\r\n      inset:0;\r\n      width:100%;\r\n      height:100%;\r\n      `;\r\n      mosaic.setAttribute(\"style\", styl);\r\n    } else {\r\n      let styl = mosaic.getAttribute(\"style\");\r\n      styl = `\r\n      position: fixed;\r\n      inset:0;\r\n      width:250px;\r\n      height:350px;\r\n      `;\r\n      /*\r\n        Setup mouse events\r\n      */\r\n      /** @type {HTMLElement} */\r\n      let drag = mosaic.querySelector(\".draggable\");\r\n      if (drag)\r\n        if (!drag.hasAttribute(\"flk-init\")) {\r\n          console.log(\"flk-init\", \"true\");\r\n          drag.setAttribute(\"flk-init\", \"true\");\r\n          FLK.dragElement(mosaic, drag);\r\n        } else {\r\n          let x = mosaic.getAttribute(\"data-x\");\r\n          let y = mosaic.getAttribute(\"data-y\");\r\n          let z = mosaic.getAttribute(\"data-z\") || 100;\r\n          styl += `top: ${y}px;left: ${x}px; z-index: ${z};`;\r\n        }\r\n      /*\r\n        Set Style\r\n      */\r\n      mosaic.setAttribute(\"style\", styl);\r\n    }\r\n  }\r\n};\r\n\r\nFLK.dragElement = (mosaic, elmnt) => {\r\n  /*\r\n    mosaic listner\r\n  */\r\n  // mosaic.onmousedown\r\n  /*\r\n    mosaic header\r\n  */\r\n  elmnt.onmousedown = dragMouseDown;\r\n  elmnt.onmousemove = dragMouseMove;\r\n  elmnt.onmouseup = dragMouseUp;\r\n  /*\r\n    try fix movement\r\n  */\r\n  let elmntWin = mosaic.querySelector(\".mosaic-window\");\r\n  elmntWin.onmousemove = dragMouseMove;\r\n\r\n  let offsetX, offsetY;\r\n  function dragMouseMove(e) {\r\n    e = e || window.event;\r\n    e.preventDefault();\r\n    if (elmnt.hasAttribute(\"data-active\")) {\r\n      let posX = FLK.x - offsetX;\r\n      let posY = FLK.y - offsetY;\r\n      mosaic.setAttribute(\"data-x\", posX);\r\n      mosaic.setAttribute(\"data-y\", posY);\r\n      /** @type {string} */\r\n      let stl = mosaic.getAttribute(\"style\");\r\n      stl = stl.split(\";\");\r\n      let stly = {};\r\n      for (let i = 0; i < stl.length; i++) {\r\n        const element = stl[i];\r\n        let s = element.split(\":\");\r\n        if (s.length > 1) {\r\n          stly[s[0].trim()] = s[1].trim();\r\n        }\r\n      }\r\n      stly.top = posY + \"px\";\r\n      stly.left = posX + \"px\";\r\n      let str = \"\";\r\n      for (const key in stly) {\r\n        str += `${key}:${stly[key]};`;\r\n      }\r\n      mosaic.setAttribute(\"style\", str);\r\n    }\r\n  }\r\n  function dragMouseUp(e) {\r\n    elmnt.removeAttribute(\"data-active\");\r\n  }\r\n  function dragMouseDown(e) {\r\n    e = e || window.event;\r\n    e.preventDefault();\r\n    elmnt.setAttribute(\"data-active\", \"true\");\r\n    mosaic.setAttribute(\"data-z\", FLK.z++);\r\n    let rect = elmnt.getBoundingClientRect();\r\n    offsetX = FLK.x - rect.left;\r\n    offsetY = FLK.y - rect.top;\r\n  }\r\n};\r\n\r\nFLK.animate = (timestamp) => {\r\n  const deltaTime = timestamp - FLK.lastTime;\r\n  FLK.lastTime = timestamp;\r\n  FLK.loop(deltaTime);\r\n  requestAnimationFrame(FLK.animate);\r\n};\r\n\r\nFLK.animationID = requestAnimationFrame(FLK.animate);\r\n"],
  "mappings": "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",
  "names": ["els", "i", "elementDrag", "e", "delta", "splits", "i", "mosaic", "editor", "styl", "drag", "x", "y", "z", "elmnt", "dragMouseDown", "dragMouseMove", "dragMouseUp", "elmntWin", "offsetX", "offsetY", "posX", "posY", "stl", "stly", "s", "str", "key", "rect", "timestamp", "deltaTime"]
}
